<div class="flex flex-col h-screen bg-gray-100">
  <app-header
    [title]="'Buscar artículos'"
    [user]="currentUser"
    [showBackButton]="true"
    (logoutClicked)="logout()"
  >
  </app-header>

  <main
    class="max-w-7xl mx-auto w-full flex flex-col flex-grow p-4 sm:p-6 lg:p-8 min-h-0"
  >
    <!-- HIJO 1: Formulario (no crece) -->
    <form (ngSubmit)="triggerSearch($event)" class="mb-4 flex-shrink-0">
      <div class="flex gap-2">
        <input
          #searchInput
          type="text"
          [formControl]="searchControl"
          (keydown.enter)="triggerSearch($event)"
          placeholder="Buscar por ID, descripción o código de barras y presiona Enter..."
          class="flex-grow px-4 py-2 bg-white border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
        <button
          type="submit"
          class="px-4 py-2 text-white font-semibold bg-blue-600 rounded-md hover:bg-blue-700"
        >
          Buscar
        </button>
      </div>
    </form>

    <!-- HIJO 2: El componente de la tabla. Ahora es el que crece para llenar el espacio. -->
    <app-articulos-table
      *ngIf="articulosPage$ | async as page; else loading"
      class="flex-grow min-h-0"
      [page]="page"
      [columns]="tableColumns"
      [activeIndex]="keyboardNav.activeIndex"
      (articleSelected)="handleArticleSelection($event)"
      (pageChange)="handlePageChange($event)"
    >
    </app-articulos-table>

    <ng-template #loading>
      <div class="flex-grow flex items-center justify-center text-gray-500">
        Cargando...
      </div>
    </ng-template>

    <!-- HIJO 3: Footer (no crece) -->
  </main>
  <app-shortcuts-footer [shortcuts]="viewShortcuts"></app-shortcuts-footer>
</div>
